<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
  <title>Presensi Mobile</title>
  <style>
    :root {
      --pri:#4CAF50; --pri2:#45a049; --bg:#f7f9fb;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body {
      font-family: "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh; padding:12px;
    }
    .card {
      max-width: 500px; margin: auto; background:#fff;
      border-radius:18px; box-shadow:0 6px 20px rgba(0,0,0,.2);
      overflow:hidden;
    }
    .header {
      padding:18px; color:#fff;
      background: linear-gradient(45deg,var(--pri),var(--pri2));
      text-align:center;
    }
    .header h1 { font-size:1.4rem; margin-bottom:4px }
    .header p { font-size:.9rem; opacity:.9 }

    .body { padding:18px }
    .row { display:grid; gap:12px; margin-bottom:14px }
    .row.two { grid-template-columns:1fr 1fr; gap:10px }

    label { font-size:.95rem; font-weight:600 }
    input, select {
      width:100%; padding:12px 14px; border:1.5px solid #ddd;
      border-radius:10px; font-size:1rem;
    }

    .section {
      background:#f8fafc; border:1px solid #eef2f7;
      padding:14px; border-radius:14px; margin-bottom:16px
    }
    .status {
      margin-top:10px; padding:10px;
      border-radius:10px; font-weight:500; text-align:center;
      font-size:.9rem
    }
    .ok{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
    .err{background:#fde2e1;color:#7a1c1b;border:1px solid #f5b5b2}
    .info{background:#e6f4ff;color:#084b7a;border:1px solid #c7e3ff}

    .button {
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px; padding:14px; border:none;
      border-radius:12px; font-weight:600; cursor:pointer;
      font-size:1rem; width:100%;
    }
    .primary{background:linear-gradient(45deg,var(--pri),var(--pri2));color:#fff}
    .secondary{background:linear-gradient(45deg,#2196F3,#1976D2);color:#fff}
    .button:disabled{opacity:.6;cursor:not-allowed}

    video {
      width:100%; border-radius:12px;
      background:#eef2f7; object-fit:cover; margin-bottom:10px;
    }
    #preview img {
      max-width:100%; border-radius:12px; border:3px solid var(--pri); margin-top:8px;
    }

    .kv {display:flex; justify-content:space-between; font-size:.9rem;
         border-bottom:1px dashed #e5e7eb; padding:6px 0 }
    .kv:last-child{border-bottom:none}
    a.map { font-size:.8rem; color:#1976D2; word-break:break-all }
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <h1>üìã Daftar Hadir ASN Dinlutkan Kab. Rembang</h1>
      <p>Aplikasi ini dibuat dalam rangka optimalisasi kedisiplinan ASN di Lingkungan Dinlutkan</p>
    </div>
    <div class="body">
      <form id="formPresensi">
        <div class="row">
          <div>
            <label for="nama">Nama Lengkap</label>
            <input id="nama" name="nama" required />
          </div>
        </div>
        <div class="row two">
          <div>
            <label for="nip">NIP</label>
            <input id="nip" name="nip" required />
          </div>
          <div>
            <label for="status">Status</label>
            <select id="status" name="status" required>
              <option value="">Pilih</option>
              <option>Hadir</option><option>Terlambat</option><option>Izin</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="tpi">Unit Kerja</label>
            <select id="tpi" name="tpi" required>
              <option value="">Pilih Unit Kerja</option>
              <option>Dinas</option>
              <option>UPT</option>
              <option>TPI Tunggulsari</option>
              <option>TPI Tanjungsari</option>
              <option>TPI Tasikagung I</option>
              <option>TPI Tasikagung II</option>
              <option>TPI Pasarbanggi</option>
              <option>TPI Pandangan</option>
              <option>TPI Karanganyar</option>
              <option>TPI Karanglincak</option>
              <option>TPI Sarang</option>
              <option>WFH</option>
              <option>Lapangan</option>
            </select>
          </div>
        </div>

        <!-- Kamera -->
        <div class="section">
          <label>üì∑ Kamera</label>
          <video id="video" playsinline autoplay muted></video>
          <button type="button" id="btnKamera" class="button secondary">üé• Buka Kamera</button>
          <button type="button" id="btnFoto" class="button primary" disabled>üì∏ Ambil Foto</button>
          <button type="button" id="btnUlang" class="button" disabled>üîÑ Ulangi</button>
          <div id="preview"></div>
          <canvas id="canvas" style="display:none"></canvas>
          <div id="camMsg" class="status info" style="display:none"></div>
        </div>

        <!-- Lokasi -->
        <div class="section">
          <label>üìç Lokasi</label>
          <div class="kv"><span>Tanggal & Waktu</span><span id="waktu">-</span></div>
          <div class="kv"><span>Koordinat</span><span id="koor">Mencari...</span></div>
          <div class="kv"><span>Akurasi</span><span id="akurasi">-</span></div>
          <div class="kv"><span>Peta</span><a id="mapLink" class="map" target="_blank">-</a></div>
          <div id="locMsg" class="status info" style="display:none"></div>
        </div>

        <button id="btnSubmit" class="button primary" disabled>üíæ Simpan Presensi</button>
      </form>
      <div id="statusMsg"></div>
    </div>
  </div>

  <!-- Script sama persis dengan kode kamu, tinggal ditempel -->
  <script>
    /* script dari versi kamu tetap dipakai tanpa perubahan */
  </script>
</body>
</html>
